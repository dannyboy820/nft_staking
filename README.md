# CosmWasm Examples

[![CircleCI](https://circleci.com/gh/InterWasm/cw-contacts/tree/main.svg?style=shield)](https://app.circleci.com/pipelines/github/InterWasm/cw-contracts)

This repo is a collection of simple contracts built with the
[cosmwasm](https://github.com/CosmWasm/cosmwasm) framework.
Smart contracts here are for only demonstration purposes, **not production ready**.
Production grade smart contracts are collected under [cw-plus](https://github.com/CosmWasm/cw-plus).

This repo's organization is relatively simple. The top-level directory is just a placeholder
and has no real code. And we use workspaces to add multiple contracts below.
This allows us to compile all contracts with one command.

## Usage:

The following contracts are available for use. For each of the contracts in `contracts`, you can view the source code under `src`
and a precompiled wasm ready for deployment called `contract.wasm`.

Take a look here:

* [escrow](https://github.com/CosmWasm/cw-examples/tree/main/contracts/escrow) - A basic escrow with timeout and partial release
* [erc20](https://github.com/CosmWasm/cw-examples/tree/main/contracts/erc20) - Basic implementation the erc20 interface for CosmWasm, as a base for token designers
* [nameservice](https://github.com/CosmWasm/cw-examples/tree/main/contracts/nameservice) - Simple name service application to buy names and map values to those names
* [voting](https://github.com/CosmWasm/cw-examples/tree/main/contracts/voting) - An example voting contract to create, manage, vote and deposit on polls
* [simple-option](https://github.com/CosmWasm/cw-examples/tree/main/contracts/simple-option) - A contract that replicates options in finance
* [cw20-pot](https://github.com/CosmWasm/cw-examples/tree/main/contracts/cw20-pot) - Basic smart contract using cw20 contact

You can get more info from `README.md` file in each of the contacts.

## Development

### Starting a contract

If you want to add a contract, first fork this repo and create a branch for your PR.
I suggest setting it up via [cw-template](https://github.com/CosmWasm/cw-template):

`cargo generate --git https://github.com/CosmWasm/cw-template.git --name FOO`

Then update the `README.md` to reflect your actual contract (just read the `README.md` in the autogenerated
template - it explains a lot).

### Preparing for merge

Before you merge the code, make sure it builds and passes all tests:

```
./devtools/build_test_all.sh
```

Once you pass these checks, please open a [PR on this repo](https://github.com/InterWasm/cw-contracts/pulls).

### Release builds

On every tag release builds are automatically created and
[deployed to GitHub Releases](https://github.com/InterWasm/cw-contracts/releases).

You can build release artifacts manually like this, which creates a reproducible
optimized build for each contract and saves them to the `./artifacts` directory:

```
docker run --rm -v "$(pwd)":/code \
  --mount type=volume,source="$(basename "$(pwd)")_cache",target=/code/target \
  --mount type=volume,source=registry_cache,target=/usr/local/cargo/registry \
  cosmwasm/rust-optimizer:0.12.3 ./contracts/*/
```
